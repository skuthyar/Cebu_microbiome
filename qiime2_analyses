# Import data

qiime tools import --type ‘SampleData[PairedEndSequencesWithQuality]’ --input-path /FILE.csv --output-path /FILE.qza --input-format PairedEndFastqManifestPhred33

# Get summary info

qiime demux summarize --i-data /FILE.qza --o-visualization /FILE.qzv

# Quality filter using a bash script

qiime dada2 denoise-paired --i-demultiplexed-seqs /FILE.qza --p-trunc-len-f 250 --p-trunc-len-r 250 --p-trim-left-f 20 --p-trim-left-r 20 --p-max-ee-f 6 --p-max-ee-r 6 --p-n-threads 8 --o-table /TABLE.qza --o-representative-sequences /REPSEQSqza --o-denoising-stats /STATS.qza

# Examine results

qiime metadata tabulate --m-input-file /STATS.qza --o-visualization /STATS.qzv

# Create phylogenetic tree using a bash script

qiime phylogeny align-to-tree-mafft-fasttree --i-sequences /REPSEQS.qza --o-alignment /ALIGNEDSEQS.qza --o-masked-alignment /MASKEDSEQS.qza --o-tree /UNROOTEDTREE.qza --o-rooted-tree /ROOTEDTREE.qza

# Assign taxonomy using a bash script

qiime feature-classifier classify-sklearn --i-classifier /CLASSIFIER.qza --i-reads /REPSEQS.qza --o-classification /TAXONOMY.qza

# Filter unwanted data

qiime taxa filter-table --i-table /projects/TABLE.qza --i-taxonomy /TAXONOMY.qza --p-exclude mitochondria, chloroplast --o-filtered-table /FILTEREDTABLE.qza

* Note: can also filter a larger dataset using a metadata file, which tells QIIME2 which samples to retain in the final dataset

qiime feature-table filter-samples --i-table /FILTEREDTABLE.qza --m-metadata-file /METADATA.txt --o-filtered-table /FILTEREDTABLE2.qza

# Export unrarefied data for running DivNet package in R

qiime tools export --input-path /FILTEREDTABLE2.qza --output-path /PATH

biom convert -i /FEATURE-TABLE.biom -o /ASV-TABLE.txt --to-tsv

qiime tools export --input-path /TAXONOMY.qza --output-path /PATH

qiime tools export --input-path /UNROOTEDTREE.qza --output-path /PATH
